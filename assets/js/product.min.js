jQuery(function(s){function t(){var e=s("#product-type").val(),t=s("#_virtual").is(":checkbox")?s("input#_virtual:checked").length:s("#_virtual").val(),a=s("#_downloadable").is(":checkbox")?s("input#_downloadable:checked").length:s("#_downloadable").val(),i=".hide_if_downloadable, .hide_if_virtual",n=".show_if_downloadable, .show_if_virtual, .show_if_external",a=(s.each(wcv_frontend_product.product_types,function(e,t){i=i+", .hide_if_"+t,n=n+", .show_if_"+t}),s(i).show().removeClass("is_hidden"),s(i).find("input").removeClass("is_hidden"),s(n).hide().addClass("is_hidden"),s(n).find("input").addClass("is_hidden"),a&&(s(".show_if_downloadable").show().removeClass("is_hidden"),s(".show_if_downloadable").find("input").removeClass("is_hidden")),t&&(s(".show_if_virtual").show().removeClass("is_hidden"),s(".show_if_virtual").find("input").removeClass("is_hidden"),s("ul.tabs-nav li a").filter(":visible")[0].click()),s(".show_if_"+e).show().removeClass("is_hidden"),s(".show_if_"+e).find("input").removeClass("is_hidden"),a&&(s(".hide_if_downloadable").hide().addClass("is_hidden"),s(".hide_if_downloadable").find("input").addClass("is_hidden")),t&&(s(".hide_if_virtual").hide().addClass("is_hidden"),s(".hide_if_virtual").find("input").addClass("is_hidden")),"grouped"==e&&(s(".linked_product").parent().addClass("active"),s("#linked_product").removeClass("hide-all").addClass("active")),s(".hide_if_"+e).hide().addClass("is_hidden"),s(".hide_if_"+e).find("input").addClass("is_hidden"),s("input#_manage_stock").change(),wcv_frontend_product.is_demensions_required);a&&t?s("input#_length, input#_width, input#_height").prop("required",!1):a&&s("input#_length, input#_width, input#_height").prop("required",!0),!jQuery(".wcv-form").length||jQuery(".wcv-search-form").length||s(".wcv-form").hasClass("wcv-form-exclude")||s(".wcv-form").parsley().reset()}function _(){var e=s(".wcv-gallery-image").length;return s("#product_images_container").data("gallery_max_upload")-1<e}var n,r,o,l;function e(e,t){s(e).is(":checked")?(t.prop("disabled",!0),t.each(function(){s(this).is(":checkbox")?s(this).removeAttr("checked"):s(this).val("")})):t.prop("disabled",!1)}s("select#product-type").change(function(){var e=s(this).val();"variable"===e?(s("input#_manage_stock").change(),s("input#_downloadable").prop("checked",!1),s("input#_virtual").removeAttr("checked")):"grouped"!==e&&"external"!==e||(s("input#_downloadable").prop("checked",!1),s("input#_virtual").removeAttr("checked")),t(),s("ul.tabs-nav li a").filter(":visible")[0].click(),s("body").trigger("woocommerce-product-type-change",e,s(this)),s(".wcv-tabs").find("select.select2").select2()}).change(),s("input#_downloadable, input#_virtual").change(function(){t()}),s(".sale_price_dates_fields").each(function(){var e=!1;s(".sale_price_dates_fields").find("input").each(function(){""!=s(this).val()&&(e=!0)}),e?(s(".sale_schedule").hide(),s(".sale_price_dates_fields").show()):(s(".sale_schedule").show(),s(".sale_price_dates_fields").hide())}),s(".sale_schedule").on("click",function(){return s(".sale_price_dates_fields").show(),s(this).hide(),s(".cancel_sale_schedule").show(),!1}),s(".cancel_sale_schedule").on("click",function(){return s(".sale_price_dates_fields").hide(),s(this).hide(),s(".sale_schedule").show(),!1}),s("input#_manage_stock").change(function(){var e;s(this).is(":checked")?(s("div.stock_fields").show().removeClass("is_hidden"),s("div.stock_fields").find("input").removeClass("is_hidden"),s(".stock_status_field").hide()):(e=s("select#product-type").val(),s("div.stock_fields").hide().addClass("is_hidden"),s("div.stock_fields").find("input").addClass("is_hidden"),s(".stock_status_field:not( .hide_if_"+e+" )").show()),s(".wcv-form").hasClass("wcv-form-exclude")||s(".wcv-form").parsley().reset()}).change(),s(".wcv-media-uploader-featured-delete").on("click",function(e){e.preventDefault(),s(".wcv-featuredimg").html(""),s("#_featured_image_id").val(""),s(".wcv-media-uploader-featured-delete").addClass("hidden"),s(".wcv-media-uploader-featured-add").removeClass("hidden")}),s(".wcv-media-uploader-featured-add").on("click",function(e){var t,a,i;return e.preventDefault(),e=s(".wcv-featuredimg").data("title"),a=s(".wcv-featuredimg").data("button_text"),(i=wp.media({title:e,button:{text:a},multiple:!1})).on("select",function(){var e;t=i.state().get("selection").first().toJSON(),s.trim(t.url.length)<0||(e=(t.sizes.thumbnail||t).url,s(".wcv-featuredimg").append('<img src="'+e+'" alt="'+t.caption+'" title="'+t.title+'" style="max-width: 100%;" />'),s("#_featured_image_id").val(t.id),s(".wcv_featured_image_msg").html(""),s(".wcv-featuredimg").css("background-color","#e1e1e1"),s(".wcv-media-uploader-featured-add").addClass("hidden"),s(".wcv-media-uploader-featured-delete").removeClass("hidden"))}),i.open(),!1}),s(document).on("click",function(){var e=s(".attachment.selected").length,t=s("#product_images_container").data("gallery_max_upload"),a=s("#product_images_container").data("gallery_max_selected_notice");t<e&&(s(".max-gallery-selected-warning").remove(),s(".media-frame-toolbar .media-toolbar .media-toolbar-secondary").prepend('<div class="woocommerce-info max-gallery-selected-warning">'+a+"</div>"),s(".media-button-select").attr("disabled",!0)),e<=t&&(s(".max-gallery-selected-warning").remove(),s(".media-button-select").attr("disabled",!1))}),s("#product_images_container").on("click","a.delete",function(e){var t=s("#product_image_gallery"),a=(e.preventDefault(),s(this).closest("li.wcv-gallery-image").remove(),"");return s("#product_images_container ul li.wcv-gallery-image").css("cursor","default").each(function(){var e=jQuery(this).attr("data-attachment_id");a=a+e+","}),t.val(a),s("#tiptip_holder").removeAttr("style"),s("#tiptip_arrow").removeAttr("style"),!1}),s(".wcv-media-uploader-gallery").on("click",function(e){var i,n,r,o,l,d,c;return e.preventDefault(),i=s("#product_image_gallery"),n=s("#product_images_container ul.product_images"),r=i.val(),o=s("#product_images_container").data("gallery_max_upload"),l=s("#product_images_container").data("gallery_max_selected_notice"),d=s(".wcv-media-uploader-gallery a"),(c=wp.media.frames.product_gallery=wp.media({title:d.data("choose"),button:{text:d.data("update")},states:[new wp.media.controller.Library({title:d.data("choose"),filterable:"all",multiple:!0})]})).on("select",function(){var t,e=c.state().get("selection"),a=(s(".max-gallery-images-exceeded-warning").remove(),0);e.map(function(e){(e=e.toJSON()).id&&!_()&&(r=r?r+","+e.id:e.id,t=(e.sizes.thumbnail||e).url,n.append('<li class="wcv-gallery-image" data-attachment_id="'+e.id+'"><img src="'+t+'" /><ul class="actions"><li><a href="#" class="delete" title="'+d.data("delete")+'"><svg class="wcv-icon wcv-icon-md"><use xlink:href="'+wcv_frontend_product.assets_url+'svg/wcv-icons.svg#wcv-icon-times"></use></svg></a></li></ul></li>'),s(".wcv_gallery_msg").html("")),a++}),i.val(r),o<a&&(e='<div class="max-gallery-images-exceeded-warning">'+l+"</div>",s("#product_images_container").append(e))}),c.on("close",function(){s(".attachment.selected").removeClass("selected")}),_()?(e=s("#product_images_container").data("gallery_max_notice"),alert(e)):c.open(),!1}),s("#files_download").on("click",".downloadable_files a.insert",function(){return s(this).closest(".downloadable_files").find("tbody").append(s(this).data("row")),!1}),s("#files_download").on("click",".downloadable_files a.delete",function(){return s(this).closest("tr").remove(),!1}),s(document).on("change",".file_display",function(e){e.preventDefault();var e=s(this),e=(r=e.closest("tr").find(".file_url"),e.val()),t=wcv_frontend_product.mime_types.join("|"),t=new RegExp(`^.*.(${t})$`,"gm");e&&"file_url"!==wcv_frontend_product.wcv_file_display&&t.test(e)&&r.val(e)}),s(document).on("click",".upload_file_button",function(e){var t=s(this);r=t.closest("tr").find(".file_url"),o=t.closest("tr").find(".file_id"),l=t.closest("tr").find(".file_display"),e.preventDefault(),n||(e=[new wp.media.controller.Library({library:wp.media.query(),multiple:!0,title:t.data("choose"),priority:20,filterable:"uploaded"})],(n=wp.media.frames.downloadable_file=wp.media({title:t.data("choose"),library:{type:""},button:{text:t.data("update")},multiple:!0,states:e})).on("select",function(){var t="",a="",i=0;n.state().get("selection").map(function(e){a="file_url"==wcv_frontend_product.wcv_file_display?e.attributes.url:e.attributes.filename,(e=e.toJSON()).url&&(t=e.url),e.id&&(i=e.id)}),r.val(t),l.val(a),o.val(i)}),n.on("ready",function(){n.uploader.options.uploader.params={type:"downloadable_product"}})),n.open()}),s(".downloadable_files tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),s("#_shipping_fee_national_disable").change(function(){e(s(this),s(".wcv-disable-national-input"))}),s("#_shipping_fee_national_free").change(function(){e(s(this),s("#_shipping_fee_national")),e(s(this),s("#_national_minimum_shipping_fee")),e(s(this),s("#_national_maximum_shipping_fee")),e(s(this),s("#_national_free_shipping_product"))}),s("#_shipping_fee_international_disable").change(function(){e(s(this),s(".wcv-disable-international-input"))}),s("#_shipping_fee_international_free").change(function(){e(s(this),s("#_shipping_fee_international")),e(s(this),s("#_international_minimum_shipping_fee")),e(s(this),s("#_international_maximum_shipping_fee")),e(s(this),s("#_international_free_shipping_product"))}),s("#shipping").on("click",".wcv_shipping_rates a.insert",function(){var e=s("#wcv_shipping_rates_table tbody tr").length,t=(t=s(this).data("row").replace('id="_wcv_shipping_overrides_"','id="_wcv_shipping_overrides_'+e+'"')).replace('name="_wcv_shipping_overrides_"','name="_wcv_shipping_overrides_'+e+'"');return s(this).closest(".wcv_shipping_rates").find("tbody").append(t).find("select").select2({placeholderOption:"first",width:"100%"}),!1}),s("#shipping").on("click",".wcv_shipping_rates a.delete",function(){return s(this).closest("tr").remove(),!1}),s(".wcv_shipping_rates tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td.sort",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65}),s(".select2").select2(),s(".category-select2").select2({maximumSelectionLength:wcv_frontend_product.category_limit,language:{maximumSelected:function(e){return 1!=e.maximum?wcv_frontend_product.select2_maximumSelected_plural:wcv_frontend_product.select2_maximumSelected_single},loadingMore:function(){return wcv_frontend_product.select2_loadingMore},errorLoading:function(){return wcv_frontend_product.select2_errorLoading},noResults:function(){return wcv_frontend_product.select2_noResults},searching:function(){return wcv_frontend_product.select2_searching},removeAllItems:function(){return wcv_frontend_product.select2_removeAllItems}}}),t(),e(s("#_shipping_fee_national_free"),s("#_shipping_fee_national")),e(s("#_shipping_fee_international_free"),s("#_shipping_fee_international")),e(s("#_shipping_fee_national_disable"),s(".wcv-disable-national-input")),e(s("#_shipping_fee_international_disable"),s(".wcv-disable-international-input")),s(".confirm_delete").on("click",function(e){confirm(s(this).data("confirm_text"))||e.preventDefault()});var a=s(".product_attributes").find(".woocommerce_attribute").get(),d=(a.sort(function(e,t){e=parseInt(s(e).attr("rel"),10),t=parseInt(s(t).attr("rel"),10);return e<t?-1:t<e?1:0}),s(a).each(function(e,t){s(".product_attributes").append(t)}),s(".product_attributes .woocommerce_attribute").each(function(e,t){"none"!==s(t).css("display")&&s(t).is(".taxonomy")&&s("select.attribute_taxonomy").find('option[value="'+s(t).data("taxonomy")+'"]').attr("disabled","disabled")}),s(".wcv_product_attributes").on("click",".wcv-metabox h5",function(e){s(e.target).filter(":input, option, .sort").length||s(this).next(".wcv-metabox-content").stop().slideToggle()}).on("click",".expand_all",function(){return s(this).closest(".wcv_product_attributes").find(".wcv-metabox > .wcv-metabox-content").show(),!1}).on("click",".close_all",function(){return s(this).closest(".wcv_product_attributes").find(".wcv-metabox > .wcv-metabox-content").hide(),!1}),s(".wcv-metabox.closed").each(function(){s(this).find(".wcv-metabox-content").hide()}),s(function(){function l(e){var t=s("#wcv-variation-attributes").data("variation_attr");jQuery.isEmptyObject(t)||(delete t[e],s("#wcv-variation-attributes").data("variation_attr",t))}function n(e,t,a){var i,n={},r=e.parent().data("taxonomy"),o=e.parent().data("index_value");s("#attribute_variation_"+o).is(":checked")&&(e.is("input")?(i=e.val().split(wcv_frontend_product.wc_deliminator),s.each(i,function(e,t){0<s.trim(t).length&&(n[s.trim(t).toLowerCase()]=s.trim(t))})):(i=e.select2("data"),s.each(i,function(e,t){n[t.id]=t.text}))),jQuery.isEmptyObject(n)?l(r):(o=n,e=r,i=t,r=a,t=s("#wcv-variation-attributes").data("variation_attr"),jQuery.isEmptyObject(t)&&(t={}),(a={}).values=o,a.position=i,a.name=e,a.label=r,t[e]=a,s("#wcv-variation-attributes").data("variation_attr",t))}function o(){s(".product_attributes .woocommerce_attribute").each(function(e,t){s(".attribute_position",t).val(parseInt(s(t).index(".product_attributes .woocommerce_attribute"),10));var a=s(this).data("index_value"),a=(t=s("#attribute_values_"+a),s("#attribute_position_"+a).val());n(t,a,s(this).data("label"))})}s("button.add_attribute").on("click",function(){let e=s(".product_attributes .woocommerce_attribute").length,t=s("select.attribute_taxonomy").val(),a=s(".wcv_product_attributes");var i,n,r;if(a.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t)return i=s(".product_attributes "),n=s("#product-type").val(),r={action:"wcv_json_add_attribute",taxonomy:t,i:e,security:wcv_frontend_product.wcv_add_attribute_nonce},s.post(wcv_frontend_product.ajax_url,r,function(e){e.error?window.alert(e.error):(i.append(e),s("select.attribute_values").filter(":not(.select12-hidden-accessible)").select2(),"variable"!==n&&i.find(".enable_variation").hide(),s(document.body).trigger("wc-enhanced-select-init"),o(),s(document.body).trigger("woocommerce_added_attribute")),a.unblock()}),t&&(s("select.attribute_taxonomy").find('option[value="'+t+'"]').attr("disabled","disabled"),s("select.attribute_taxonomy").val("")),!1}),s(".product_attributes").on("click","button.select_all_attributes",function(){var e=s(this).parent().data("index_value");return s("#attribute_values_"+e+" > option").prop("selected","selected"),s("#attribute_values_"+e).trigger("change"),d(),!1}),s(".product_attributes").on("click","button.select_no_attributes",function(){var e=s(this).parent().data("index_value"),t=s(this).parent().data("taxonomy");return s("#attribute_values_"+e+" > option").removeAttr("selected"),s("#attribute_values_"+e).trigger("change"),s("#attribute_variation_"+e).is(":checked")&&l(t),d(),!1}),s(".product_attributes").on("change",".attribute_values",function(){var e=s(this).parent().data("index_value"),e=s("#attribute_position_"+e).val(),t=s(this).closest(".woocommerce_attribute").data("label");d(),n(s(this),e,t)}),s(".product_attributes").on("change",".wcv_variation_checkbox",function(){var e=s(this).parent().parent().parent().data("index_value"),t=s(this).closest(".woocommerce_attribute").data("taxonomy"),a=s(this).closest(".woocommerce_attribute").data("label"),i=s("#attribute_position_"+e).val(),e=s("#attribute_values_"+e);s(this).is(":checked")?n(e,i,a):l(t)}),s(".product_attributes").on("click",".remove_row",function(){var e;return window.confirm(wcv_frontend_product.remove_attribute)&&((e=s(this).parent().parent()).is(".taxonomy")?(e.find("select, input[type=text]").val(""),e.hide(),s(".attribute_taxonomy").find('option[value="'+e.data("taxonomy")+'"]').removeAttr("disabled")):(e.find("select, input[type=text]").val(""),e.hide(),o()),l(e.data("taxonomy")),d()),!1}),s(".product_attributes").sortable({items:".woocommerce_attribute",cursor:"move",axis:"y",handle:"h5",scrollSensitivity:40,forcePlaceholderSize:!0,helper:"clone",opacity:.65,placeholder:"wcv-metabox-sortable-placeholder",start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.data("index_value");t.item.removeAttr("style"),o()}}),o(),s(".attribute_values").each(function(){var e=s(this).parent().data("index_value"),e=s("#attribute_position_"+e).val(),t=s(this).closest(".woocommerce_attribute").data("label");n(s(this),e,t)})}),s(".product_attributes").on("click","button.add_new_attribute",function(){s(".product_attributes").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=s(this).parent().data("index_value"),t=s("#attribute_values_"+e),e=s(this).parent().data("taxonomy"),a=window.prompt(wcv_frontend_product.new_attribute_prompt);return a?(e={action:"wcv_json_add_new_attribute",taxonomy:e,term:a,security:wcv_frontend_product.wcv_add_attribute_nonce},s.post(wcv_frontend_product.ajax_url,e,function(e){e.error?window.alert(e.error):e.slug&&(t.append(s("<option />").attr("value",e.slug).prop("selected","selected").text(e.name)),t.trigger("change"),s(t).select2("destroy").select2()),s(".product_attributes").unblock()})):s(".product_attributes").unblock(),!1}),window.Parsley.on("form:submit",function(){return d()}),s("#wcv-product-edit").submit(function(e){if(1==wcv_frontend_product.require_featured_image&&""===s("#_featured_image_id").val()&&(s(".wcv_featured_image_msg").html(wcv_frontend_product.require_featured_image_msg),s(".wcv-featuredimg").css("background-color","rgba(150,8,12,.55)"),e.preventDefault()),1==wcv_frontend_product.require_gallery_image&&""===s("#product_image_gallery").val()&&(s(".wcv_gallery_msg").html(wcv_frontend_product.require_gallery_image_msg),e.preventDefault()),1==wcv_frontend_product.require_download_file){var t=s(".download_file_table"),a=t.length,i=!0;if(!s("#_downloadable").is(":checked"))return;s(".downloadable_files").length&&(0==t.find(".download_file").length&&(i=!1),0<a?s(".download_file").each(function(){""!==s(this).find("td.file_name").find("input").val()&&""!==s(this).find("td.file_url").find("input").val()||(i=!1)}):i=!1,i||(s(".downloadable_files").append('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_download_file_msg+"</span>"),s(".download_file_table").css({color:"#b94a48","background-color":"#f2dede",border:"1px solid #cc0000"}),e.preventDefault()))}d();t=s("#product_save_button");void 0!==t&&t.attr("disabled","disabled")}),function(){var e=!0;return s("li a.attributes").length&&1==wcv_frontend_product.require_attributes&&(0<s(".woocommerce_attribute ").length?s(".wcv_attribute_data").each(function(){s(this).find(".attribute_values").val()?(s(".attributes-validation-error").html(""),s("a.tabs-tab.attributes").css("background-color",""),s("a.tabs-tab.attributes").css("color","")):(s(".attributes-validation-error").html('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_attributes_msg+"</span>"),s("a.tabs-tab.attributes").css("background-color","rgba(150,8,12,.55)"),s("a.tabs-tab.attributes").css("color","rgba(255,255,255,.55)"),e=!1)}):(s(".attributes-validation-error").html('<span class="wcv_required_form_msg">'+wcv_frontend_product.require_attributes_msg+"</span><br />"),s("a.tabs-tab.attributes").css("background-color","rgba(150,8,12,.55)"),s("a.tabs-tab.attributes").css("color","rgba(255,255,255,.55)"),e=!1)),e});wcv_frontend_product.shipping_system_enabled||s("#shipping").html("")});